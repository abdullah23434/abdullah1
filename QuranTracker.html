<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø¹Ø¯Ø§Ø¯ Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„Ø°ÙƒÙŠ ğŸ“–</title>
<style>
body { font-family: Arial; color:#fff; text-align:center; padding:20px; transition: background 1s; background:#2c3e50;}
h1 { color:#ffd700;}
select,input {padding:5px;margin:5px;}
button {padding:8px 12px;margin:5px;background:#ffd700;color:#333;border:none;border-radius:6px;cursor:pointer;}
button:hover {background:#e6c200;}
#schedule,#progress{margin-top:20px;text-align:left;display:inline-block;font-size:1.1em;}
table{border-collapse:collapse;margin-top:10px;}
td,th{border:1px solid #fff;padding:8px 12px;}
th{background:#ffd700;color:#333;}
</style>
</head>
<body>

<h1>Ø¹Ø¯Ø§Ø¯ Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„Ø°ÙƒÙŠ ğŸ“–</h1>

<div>
Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø©:
<select id="country" onchange="updateCities()">
<option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø© --</option>
<option value="SA">Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</option>
<option value="EG">Ù…ØµØ±</option>
<option value="AE">Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª</option>
<option value="KW">Ø§Ù„ÙƒÙˆÙŠØª</option>
<option value="JO">Ø§Ù„Ø£Ø±Ø¯Ù†</option>
<option value="LB">Ù„Ø¨Ù†Ø§Ù†</option>
<option value="IQ">Ø§Ù„Ø¹Ø±Ø§Ù‚</option>
<option value="SY">Ø³ÙˆØ±ÙŠØ§</option>
<option value="LY">Ù„ÙŠØ¨ÙŠØ§</option>
<option value="MA">Ø§Ù„Ù…ØºØ±Ø¨</option>
<option value="TN">ØªÙˆÙ†Ø³</option>
<option value="DZ">Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</option>
<option value="OM">Ø¹Ù…Ø§Ù†</option>
<option value="QA">Ù‚Ø·Ø±</option>
<option value="BH">Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†</option>
</select><br>

Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:
<select id="city">
<option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© --</option>
</select><br>

ÙƒÙ… ØµÙØ­Ø© Ù‚Ø±Ø£Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†ØŸ <input type="number" id="readPages" value="0"><br>
Ø¥Ø¬Ù…Ø§Ù„ÙŠ ØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø±Ø¢Ù†: <input type="number" id="totalPages" value="604"><br>
ÙƒÙ… ÙŠÙˆÙ… ØªØ±ÙŠØ¯ Ø£Ù† ØªØ®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ <input type="number" id="days" value="30"><br>
<button onclick="start()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
</div>

<div id="schedule"></div>
<div id="progress"></div>

<script>
// ğŸ§  Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
let pagesPerDay=0, remainingPages=0, currentDay=1;
let dailyProgress=JSON.parse(localStorage.getItem("dailyProgress") || "[]");
const prayers=["Ø§Ù„ÙØ¬Ø±","Ø§Ù„Ø¸Ù‡Ø±","Ø§Ù„Ø¹ØµØ±","Ø§Ù„Ù…ØºØ±Ø¨","Ø§Ù„Ø¹Ø´Ø§Ø¡"];
const prayerColors={"Ø§Ù„ÙØ¬Ø±":"#34495e","Ø§Ù„Ø¸Ù‡Ø±":"#3b5998","Ø§Ù„Ø¹ØµØ±":"#f39c12","Ø§Ù„Ù…ØºØ±Ø¨":"#e67e22","Ø§Ù„Ø¹Ø´Ø§Ø¡":"#2c3e50"};

// Ø§Ù„Ù…Ø¯Ù† Ù„ÙƒÙ„ Ø¯ÙˆÙ„Ø©
const locations={
  "SA":["Ø§Ù„Ø±ÙŠØ§Ø¶","Ø¬Ø¯Ø©","Ù…ÙƒØ©","Ø§Ù„Ø¯Ù…Ø§Ù…","Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"],
  "EG":["Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©","Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©","Ø§Ù„Ø¬ÙŠØ²Ø©"],
  "AE":["Ø£Ø¨ÙˆØ¸Ø¨ÙŠ","Ø¯Ø¨ÙŠ","Ø§Ù„Ø´Ø§Ø±Ù‚Ø©"],
  "KW":["Ø§Ù„ÙƒÙˆÙŠØª"],
  "JO":["Ø¹Ù…Ù‘Ø§Ù†","Ø¥Ø±Ø¨Ø¯"],
  "LB":["Ø¨ÙŠØ±ÙˆØª"],
  "IQ":["Ø¨ØºØ¯Ø§Ø¯","Ø§Ù„Ø¨ØµØ±Ø©"],
  "SY":["Ø¯Ù…Ø´Ù‚","Ø­Ù„Ø¨"],
  "LY":["Ø·Ø±Ø§Ø¨Ù„Ø³","Ø¨Ù†ØºØ§Ø²ÙŠ"],
  "MA":["Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡","Ø§Ù„Ø±Ø¨Ø§Ø·"],
  "TN":["ØªÙˆÙ†Ø³","ØµÙØ§Ù‚Ø³"],
  "DZ":["Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±","ÙˆÙ‡Ø±Ø§Ù†"],
  "OM":["Ù…Ø³Ù‚Ø·","ØµÙ„Ø§Ù„Ø©"],
  "QA":["Ø§Ù„Ø¯ÙˆØ­Ø©"],
  "BH":["Ø§Ù„Ù…Ù†Ø§Ù…Ø©"]
};

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¯Ù†
function updateCities(){
  const country=document.getElementById("country").value;
  const citySelect=document.getElementById("city");
  citySelect.innerHTML='<option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© --</option>';
  if(locations[country]){
    locations[country].forEach(city=>{
      const opt=document.createElement("option");
      opt.value=city; opt.textContent=city;
      citySelect.appendChild(opt);
    });
  }
}

// ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„ØµÙØ­Ø© Ø­Ø³Ø¨ Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© (ØªÙ‚Ø±ÙŠØ¨ÙŠ)
function setBackground(){
  const hour=new Date().getHours();
  let color="#2c3e50"; // Ø®Ø§ÙØª Ø§ÙØªØ±Ø§Ø¶ÙŠ
  if(hour>=5 && hour<12) color=prayerColors["Ø§Ù„ÙØ¬Ø±"];
  else if(hour>=12 && hour<15) color=prayerColors["Ø§Ù„Ø¸Ù‡Ø±"];
  else if(hour>=15 && hour<18) color=prayerColors["Ø§Ù„Ø¹ØµØ±"];
  else if(hour>=18 && hour<19) color=prayerColors["Ø§Ù„Ù…ØºØ±Ø¨"];
  else color=prayerColors["Ø§Ù„Ø¹Ø´Ø§Ø¡"];
  document.body.style.background=color;
}
setBackground();
setInterval(setBackground,60000);

// Ø¨Ø¯Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨
function start(){
  const country=document.getElementById("country").value;
  const city=document.getElementById("city").value;
  if(!country || !city){ alert("Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø© ÙˆØ§Ù„Ù…Ø¯ÙŠÙ†Ø©!"); return; }

  const read=parseInt(document.getElementById("readPages").value);
  const total=parseInt(document.getElementById("totalPages").value);
  const days=parseInt(document.getElementById("days").value);

  remainingPages=total-read;
  if(remainingPages<=0){ document.getElementById("schedule").innerHTML="ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ Ø®ØªÙ…Øª ÙƒØªØ§Ø¨ Ø§Ù„Ù„Ù‡!"; document.getElementById("progress").innerHTML=""; return;}

  pagesPerDay=Math.ceil(remainingPages/days);
  showDay(currentDay);
}

// Ø¹Ø±Ø¶ Ø§Ù„ÙŠÙˆÙ…
function showDay(day){
  let perPrayer=Math.floor(pagesPerDay/5);
  let extra=pagesPerDay%5;
  let table=`<h2>ğŸ“– Ø§Ù„ÙŠÙˆÙ… ${day}</h2><table><tr><th>Ø§Ù„ØµÙ„Ø§Ø©</th><th>Ø¹Ø¯Ø¯ Ø§Ù„ØµÙØ­Ø§Øª</th><th>ØªÙ… Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©ØŸ</th></tr>`;
  prayers.forEach(prayer=>{
    let pages=perPrayer; if(extra>0){pages+=1; extra-=1;}
    let checked="";
    if(dailyProgress[day-1] && dailyProgress[day-1][prayer]) checked="checked";
    table+=`<tr><td>${prayer}</td><td>${pages}</td><td><input type="checkbox" class="check" data-pages="${pages}" data-prayer="${prayer}" ${checked} onchange="updateProgress()"></td></tr>`;
  });
  table+="</table><button onclick='nextDay()'>â¡ï¸ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ</button>";
  document.getElementById("schedule").innerHTML=table;
  updateProgress();
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø¯Ù…
function updateProgress(){
  const checkboxes=document.querySelectorAll(".check");
  let dayData={};
  checkboxes.forEach(box=>{ dayData[box.dataset.prayer]=box.checked; });
  dailyProgress[currentDay-1]=dayData;
  localStorage.setItem("dailyProgress",JSON.stringify(dailyProgress));

  let left=remainingPages;
  dailyProgress.forEach(day=>{
    if(day){ Object.keys(day).forEach(p=>{ if(day[p]) left-=parseInt(document.querySelector(`.check[data-prayer='${p}']`)?.dataset.pages||0); }); }
  });

  if(left<=0){ document.getElementById("schedule").innerHTML="ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ Ø®ØªÙ…Øª ÙƒØªØ§Ø¨ Ø§Ù„Ù„Ù‡!"; document.getElementById("progress").innerHTML=""; return;}
  document.getElementById("progress").innerHTML=`ğŸ“– Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: ${left} ØµÙØ­Ø©`;
}

// Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ
function nextDay(){
  updateProgress();
  currentDay++;
  const days=parseInt(document.getElementById("days").value);
  if(currentDay>days){
    document.getElementById("schedule").innerHTML="âœ¨ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©!";
    document.getElementById("progress").innerHTML="";
  } else showDay(currentDay);
}
</script>

</body>
</html>
